<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MovEnergy - Dashboard do Usuário</title>
    
    <!-- PROTEÇÃO INICIAL -->
    <script>
        // Verificação imediata antes de carregar qualquer coisa
        (function() {
            const isLoggedIn = localStorage.getItem("usuarioLogado") === "true" || 
                              localStorage.getItem("loggedIn") === "true";
            
            if (!isLoggedIn) {
                window.location.href = "erro.html";
                throw new Error("Acesso negado - redirecionando para erro.html");
            }
        })();
    </script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="icon" href="src/imgs/logo_energy.png" type="image/x-icon">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="src/styles/usuario.css">
</head>

<body>
    <!-- HEADER -->
    <header>
        <div class="logoMov">Mov<span>Energy</span></div>
        <nav class="nav">
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="equipamentos.html">Equipamentos</a></li>
                <li><a href="contato.html">Contato</a></li>
            </ul>
            <a href="login.html" class="btn" id="auth-btn">Login</a>
        </nav>
        <div class="hamburger">
            <span></span><span></span><span></span>
        </div>
    </header>

    <main id="dashboard-main">
        <!-- HERO SECTION -->
        <div class="dashboard-hero">
            <h1 class="hero-title">Seu Desempenho Hoje</h1>
            <p class="hero-subtitle">Transformando movimento em energia sustentável</p>
        </div>

        <!-- CARDS DE DESEMPENHO -->
        <section class="dashboard-cards section">
            <div class="card card-energy">
                <div class="card-icon">
                    <i class="fas fa-bolt"></i>
                </div>
                <h3>Energia Gerada Hoje</h3>
                <span class="data-value" id="energia-hoje">0.0 kWh</span>
                <small>Equivalente a 1.8 kg de CO₂ evitado</small>
            </div>

            <div class="card card-calories">
                <div class="card-icon">
                    <i class="fas fa-fire"></i>
                </div>
                <h3>Calorias Queimadas</h3>
                <span class="data-value" id="calorias-hoje">0 kcal</span>
                <small>Meta diária: 500 kcal</small>
            </div>

            <div class="card card-discount">
                <div class="card-icon">
                    <i class="fas fa-percentage"></i>
                </div>
                <h3>Seu Desconto Mensal</h3>
                <span class="data-value" id="desconto-mensal">0%</span>
                <small>Com base na sua energia gerada</small>
            </div>
        </section>

        <!-- AÇÕES RÁPIDAS -->
        <section class="dashboard-actions section">
            <div class="action-card scan-qr pulse">
                <div class="scan-icon">
                    <i class="fas fa-qrcode"></i>
                </div>
                <h3>Registrar Treino</h3>
                <p>Use o QR Code do equipamento para começar seu treino e gerar energia limpa.</p>
                <button class="btn primary" id="scan-qr-btn">
                    <i class="fas fa-camera"></i> QR Code
                </button>
            </div>
        </section>

        <!-- HISTÓRICO -->
        <section id="historico" class="section">
            <h2 class="section-title">Histórico de Treinos</h2>
            <div class="history-container">
                <table class="history-table">
                    <thead>
                        <tr>
                            <th><i class="fas fa-calendar-alt"></i> Data</th>
                            <th><i class="fas fa-dumbbell"></i> Equipamento</th>
                            <th><i class="fas fa-fire"></i> Calorias</th>
                            <th><i class="fas fa-bolt"></i> Energia (kWh)</th>
                            <th><i class="fas fa-star"></i> Pontos</th>
                        </tr>
                    </thead>
                    <tbody id="history-data">
                        <tr>
                            <td>12/09/2025</td>
                            <td>Esteira 01</td>
                            <td>350 kcal</td>
                            <td>0.45 kWh</td>
                            <td><span class="gradient-text">45 pts</span></td>
                        </tr>
                        <tr>
                            <td>10/09/2025</td>
                            <td>Bike Ergométrica 03</td>
                            <td>420 kcal</td>
                            <td>0.55 kWh</td>
                            <td><span class="gradient-text">55 pts</span></td>
                        </tr>
                        <tr>
                            <td>08/09/2025</td>
                            <td>Elíptico 02</td>
                            <td>290 kcal</td>
                            <td>0.38 kWh</td>
                            <td><span class="gradient-text">38 pts</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- RANKING -->
        <section id="ranking" class="section">
            <h2 class="section-title">Ranking da Academia</h2>
            <p style="text-align: center; margin-bottom: 40px; color: rgba(242, 240, 239, 0.8);">
                Os usuários que mais geraram energia este mês
            </p>
            <div class="ranking-container">
                <ol class="ranking-list" id="ranking-data">
                    <li class="ranking-item">
                        <div class="ranking-position">1º</div>
                        <div class="ranking-info">
                            <div class="ranking-name">João Silva</div>
                        </div>
                        <div class="ranking-points">1200 pts</div>
                    </li>
                    <li class="ranking-item">
                        <div class="ranking-position">2º</div>
                        <div class="ranking-info">
                            <div class="ranking-name">Maria Oliveira</div>
                        </div>
                        <div class="ranking-points">1150 pts</div>
                    </li>
                    <li class="ranking-item">
                        <div class="ranking-position">3º</div>
                        <div class="ranking-info">
                            <div class="ranking-name">Pedro Santos</div>
                        </div>
                        <div class="ranking-points">980 pts</div>
                    </li>
                    <li class="ranking-item user">
                        <div class="ranking-position">4º</div>
                        <div class="ranking-info">
                            <div class="ranking-name">Você</div>
                        </div>
                        <div class="ranking-points">850 pts</div>
                    </li>
                </ol>
            </div>
        </section>

        <!-- MEU PLANO -->
        <section id="plano" class="section">
            <h2 class="section-title">Meu Plano de Assinatura</h2>
            <div class="plan-card">
                <div class="plan-info">
                    <p><strong>Plano Atual:</strong> Plano Ouro</p>
                    <p><strong>Valor Mensal:</strong> R$ 150,00</p>
                    <p><strong>Desconto Aplicado:</strong> <span class="gradient-text" id="desconto-plano">12%</span>
                    </p>
                    <p><strong>Valor a Pagar:</strong></p>
                    <div class="value-highlight" id="valor-final">R$ 132,00</div>
                </div>
                <button class="btn primary">
                    <i class="fas fa-crown"></i> Alterar Plano
                </button>
            </div>
        </section>
    </main>

    <footer>
        <div id="footer_items">
            <span id="copyright">
                &copy 2025 MovEnergy
            </span>
            <div class="social-media-buttons">
                <a href="">
                    <i class="fa-brands fa-whatsapp"></i>
                </a>
                <a href="">
                    <i class="fa-brands fa-instagram"></i>
                </a>
                <a href="">
                    <i class="fa-brands fa-facebook"></i>
                </a>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script defer src="src/scripts/header.js"></script>
    <script defer src="src/scripts/usuario.js"></script>
</body>

</html>